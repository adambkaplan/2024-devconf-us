apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  generateName: build-multiarch-
spec:
  params:
  - name: GIT_REPO
    value: https://github.com/shipwright-io/sample-go
  - name: IMAGESTREAM_NAME
    value: build-multiarch
  - name: IMAGESTREAM_TAG
    value: demo
  - name: PATH_CONTEXT
    value: docker-build
  - name: DOCKERFILE
    value: ./Dockerfile
  pipelineRef:
    name: build-multiarch
  taskRunSpecs:
  - pipelineTaskName: build-amd64
    podTemplate:
      nodeSelector:
        kubernetes.io/arch: amd64
  - pipelineTaskName: build-arm64
    podTemplate:
      nodeSelector:
        kubernetes.io/arch: arm64
  workspaces:
  - name: workspace
    persistentVolumeClaim:
      claimName: build-multiarch
